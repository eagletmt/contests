---
layout: post
title: "POJ 2679 - Adventurous Driving"
---
[http://poj.org/problem?id=2679](http://poj.org/problem?id=2679)

## 概要
N 個の街を M 本の道が繋いでいる．

道は長さを持ち，双方向に進むことができるが方向によって異なるコストが設定されている．

このとき，街 A から街 B へ optimal path を通って行ったときのコストの合計と道程を答える．

optimal path とは，経路上のすべての道が rewarding で，かつコストの合計が最小の path の中で道程が最小の path である．

街 X から街 Y へのコスト c の道が rewarding であるとは，街 X に繋がっている道のコストの最小値が c であることである．

ただし，A から B への optimal path が存在しないときは「VOID」と答え，コストの合計の最小が負の無限大であるときは「UNBOUND」と答える．

## 制約
- 1 <= N <= 1100
- 0 <= M <= 5000
- -100 <= コスト <= 100
- 1 <= 長さ <= 100

## 解法
まず rewarding でないエッジをすべて削除する．

次に DFS で B から逆辺を辿ることにより，ある頂点 v から B へ到達できるかどうかを調べる．
A から到達できないときはこの時点で「VOID」と答えて終了．

最後に B へ到達できる頂点に関して，ベルマンフォードで A からの最短経路を求める．
負閉路があった場合は「UNBOUND」で，そうでないときはコストの合計と道程を答える．

{% include_code lang:cpp poj/2679.cc %}
