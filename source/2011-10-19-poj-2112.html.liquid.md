---
layout: post
title: "POJ 2112 - Optimal Milking"
---
[http://poj.org/problem?id=2112](http://poj.org/problem?id=2112)

## 概要
K 個の搾乳機と C 頭の牛がある．
各搾乳機は一日に M 頭の牛を処理できる．

どの牛もいずれかの搾乳機のところまで行かせるとき，牛が歩く必要のある最大の距離を最小化したい．
そのときの距離を答える．

## 制約
- 1 <= K <= 30
- 1 <= C <= 200
- 1 <= M <= 15

## 解法
二分探索 + 最大流．

まず各ノード間の最短距離をワーシャルフロイドで求めておいて，最短距離が D 以下のエッジのみを使って条件を満たすように牛が移動できるかを判断して，D について二分探索．

条件を満たせるかどうかは，ソースから牛に1のエッジを張り，搾乳機からシンクに M の容量のエッジを張り，使えるエッジに無限大の容量を持たせたときの最大流が C 未満かどうかで判断できる．

{% include_code lang:cpp poj/2112.cc %}
