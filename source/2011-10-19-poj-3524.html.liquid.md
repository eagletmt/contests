---
layout: post
title: "POJ 3524 - Bug Hunt"
---
[http://poj.org/problem?id=3524](http://poj.org/problem?id=3524)

## 概要
配列の宣言文と配列の代入文からなるプログラムが与えられるので，バグが発生する最初の行が何行目かを答え答える．
バグが発生しないときは 0 と答える．

宣言文と代入文の構文は BNF で与えられている．

バグとは，

- 配列のインデックスが範囲外
- 一度も代入されていない要素を参照する

の2つである．

## 制約
- プログラムの行数は1000行以下
- 一行の文字数は80以下
- 式中の数値は0以上 2^31 - 1 以下
- 上記2つのバグ以外のバグは存在しない
- 構文エラーとなる入力も無い

## 解法
一行ずつ構文解析してチェックするだけ．

配列のサイズが最大で 2^31 - 1 となるので map で持つといい．

式を評価するとき，バグを見つけたら一気にトップレベルにまで帰ってきたいので，こういうときには例外を使うと楽に実装できると思う．

{% include_code lang:cpp poj/3524.cc %}
