---
layout: post
title: "POJ 3169 - Layout"
---
[http://poj.org/problem?id=3169](http://poj.org/problem?id=3169)

## 概要
N 頭の牛が 1 .. N と順番に並んでいる．
同じ位置に複数の牛がいても構わない．

ML 個の「牛 A と牛 B の距離は D 以下」という制約と，
MD 個の「牛 A と牛 B の距離は D 以上」という制約が与えられるので，
それを満たすように並べたときの最大の牛 1 と牛 N の距離を答える．

ただし，制約を満たすように並べることができないときは -1，いくらでも牛 N を離すことができるときは -2 を答える．

## 制約
- 2 <= N <= 10^3
- 1 <= ML, MD <= 10^4
- 1 <= A < B <= N
- 1 <= D <= 10^6

## 解法
- i から i-1 へコスト 0 のエッジ
- ML に関して，A から B へコスト D のエッジ
- MD に関して，B から A へコスト -D のエッジ

というグラフを作ることで，ノード 1 からノード N への最短経路問題になる．

-2 のケースは緩和してもノード N の距離が ∞ であるときに対応し，-1 のケースは負閉路が存在するときに対応する．

負閉路の検出をしたいので，ベルマンフォードで解く．

{% include_code lang:cpp poj/3169.cc %}
