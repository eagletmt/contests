---
layout: post
title: "POJ 3272 - Cow Traffic"
---
[http://poj.org/problem?id=3272](http://poj.org/problem?id=3272)

## 概要
N 個のノードと M 本のエッジからなる DAG が与えられる．
入ってくるエッジが無いノードがスタート地点，番号 N のノードがゴール地点である．

スタート地点からゴール地点までの可能な経路を考えたとき，そのような経路に最も含まれているエッジは何種類の経路に含まれているかを答える．

## 制約
- 1 <= N <= 5000
- 1 <= M <= 50000
- 答えは 32bit の符号付き整数に収まる

## 解法
スタート地点からあるノード i までの経路の数 `v[i]` と，あるノード j からゴール地点までの経路の数 `v_rev[j]` を，それぞれ BFS というか DP 的に数えておくと，
ノード i, j を結ぶエッジは `v[i] * v[j]` 種類の経路に含まれていることになるので，これの最大値をとればいい．

{% include_code lang:cpp poj/3272.cc %}
