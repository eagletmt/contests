---
layout: post
title: "POJ 2948 - Martian Mining"
---
[http://poj.org/problem?id=2948](http://poj.org/problem?id=2948)

## 概要
n \* m のグリッド上の各マスに，上に運ぶべき鉱物と左に運ぶべき鉱物がいくつかある．
各マスに上方向か左方向のベルトコンベアを設置して，鉱物を運ぶ．
ただし，ベルトコンベアによる運搬路は途中で曲がってはならない．

ベルトコンベアをうまく設置して，上に運ぶべき鉱物を上に運べた数と左に運ぶべき鉱物を左に運べた数の和を最大化する問題．

## 制約
- 1 <= n, m <= 500
- 0 <= 各マスのそれぞれの鉱物の数 <= 1000

## 解法
途中で曲がれないので，最適な配置は
    ←↑↑↑↑
    ←←←↑↑
    ←←←↑↑
    ←←←↑↑
    ←←←←←
のように，各行のどこかの列を境に左と上に分かれ，しかもその境界は単調非減少．

したがって
    dp[i][j] = i 行目で j 列目を境界にしたときの最大値
を
    dp[i][j] = max {
                 dp[i-1][k]
               + ((i,0) から (i,j) までの左に運ぶべき鉱物の合計)
               + ((0,j) から (i,j) までの上に運ぶべき鉱物の合計)
             } for k = 1 .. j
と更新していく DP で解ける．

{% include_code lang:cpp poj/2948.cc %}
