---
layout: post
title: "POJ 2384 - Harder Sokoban Problem"
---
[http://poj.org/problem?id=2384](http://poj.org/problem?id=2384)

## 概要
N \* N のマス目が与えられ，各マスは空白か壁のいずれかである．

プレイヤーは箱を押してゴール地点まで運ぶ．
プレイヤーは1ステップで上下左右に動くことができる．
動いた先のマスに箱がある場合，箱を押して進む．
ただしプレイヤーも箱も壁のマスには移動できない．

ゴール地点の位置が与えられたとき，ある箱とプレイヤーの初期位置から箱をゴールまで移動させるのに必要な最小ステップ数の最大値を答える．

## 制約
- 2 <= N <= 25

## 解法
(箱の位置, プレイヤーの位置) の状態数は 25^4 = 390625 しかない．

ゴールに箱を置いて，その上下左右それぞれにプレイヤーを置いて箱を「ひっぱる」ように BFS して最短経路を求め，その最大値を求める．
ただし，箱を一度も押せない場合は無効なので 0 と答えるようにする．

{% include_code lang:cpp poj/2384.cc %}
