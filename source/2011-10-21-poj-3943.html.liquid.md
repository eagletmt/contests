---
layout: post
title: "POJ 3943 - Digits on the Floor"
---
[http://poj.org/problem?id=3944](http://poj.org/problem?id=3944)

## 概要
平面上に n 本の線分があり，いくつかの数字を表している．
0〜9の各数字がそれぞれいくつあるか答える．

## 制約
- 1 <= n <= 1000
- 0 <= 座標 <= 1000
- 3本以上の線分が一点で交わっていることはない
- どの線分も数字の一部をなしており，そうでないものは存在しない
- ある数字をなしている線分は，別の数字をなしている線分と接したり交わったりすることはない
- 長さが0の線分はない

## 解法
重い実装ゲー．

まず数字をなしている線分の集合を求める．
端点で Union-Find した後，線分の途中で接しているケース(3の中央の横棒，4の右側の縦棒，8の中央の横棒)をマージして求めた．

実は

- 線分の本数 `L`
- 交点の個数 `c1`
- 線分の途中にある接点の個数 `c2`

の3つでほとんどの数字は識別できる．

- `L == 4 && c1 == 4 && c2 == 0` のとき 0
- `L == 1 && c1 == 0 && c2 == 0` のとき 1
- `L == 5 && c1 == 6 && c2 == 0` のとき 2 か 5
- `L == 4 && c1 == 6 && c2 == 1` のとき 3
- `L == 3 && c1 == 5 && c2 == 1` のとき 4
- `L == 5 && c1 == 6 && c2 == 1` のとき 6
- `L == 3 && c1 == 4 && c2 == 0` のとき 7
- `L == 5 && c1 == 6 && c2 == 2` のとき 8
- `L == 4 && c1 == 5 && c2 == 1` のとき 9

2と5を識別するには，交点ではない端点を求めて，それに続く2つの点が時計回り(2)か反時計回り(5)かを調べればいい．

{% include_code lang:cpp poj/3943.cc %}
