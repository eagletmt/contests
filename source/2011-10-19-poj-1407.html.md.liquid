---
layout: post
title: "POJ 1407 - e-Market"
---
[http://poj.org/problem?id=1407](http://poj.org/problem?id=1407)

## 概要
マーケットの注文リストが与えられるので，実際に行われる取引の結果を出力する．

注文は sell と buy の2種類があり，どちらも注文を出した人の名前と品物の名前と値段から成る．
sell の値段が buy の値段以下のときに限り，sell の値段と buy の値段の平均(切り捨て)の値段で取引が行われる．
ただし同じ人物からの sell の注文と buy の注文の間では取引は成立しない．

マーケットの注文リストは注文が出された順に並んでおり，

- 新しく sell の注文がきたときは，buy の注文の中から最も高い値段のものと取引が成立する．もしそのような注文が複数あったら，最も早く注文されたものと取引が成立する．
- 新しく buy の注文がきたときは，sell の注文の中から最も低い値段のものと取引が成立する．もしそのような注文が複数あったら，最も早く注文されたものと取引が成立する．

という規則に従って取引が行われる．

このとき，各商品について商品名の辞書順に

- 最低の値段
- 値段の平均(切り捨て)
- 最高の値段

を出力し，また各参加者について名前の辞書順に

- 払った金額の合計
- 受け取った金額の合計

も出力する．

## 制約
- 注文の数は 1000 未満
- 人の名前は大文字のアルファベットのみから成り10字以下
- 商品の名前は大文字のアルファベット1文字
- 値段は 1000 未満

## 解法
言われた通りに実装．重いわけではないが面倒．

{% include_code lang:cpp poj/1407.cc %}
