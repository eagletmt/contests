---
layout: post
title: "POJ 1932 - XYZZY"
---
[http://poj.org/problem?id=1932](http://poj.org/problem?id=1932)

## 概要
\\(N\\) 個の部屋があり、プレイヤーは1番目の部屋からスタートして \\(N\\) 番目の部屋のゴールを目指す。
\\(M\\) 本の道がそれぞれある部屋から別の部屋まで繋いでおり、一方向に移動できる。
\\(i\\) 番目の部屋にはエネルギー \\(E\_i\\) が設定されており、この部屋に入るとプレイヤーのエネルギーポイントが \\(E\_i\\) だけ増える。
同じ道や部屋を何度通っても構わない。
プレイヤーのエネルギーポイントの初期値は 100 であり、エネルギーポイントが 0 になると死んでしまう。
このとき、エネルギーポイントを切らさずにゴールまで辿りつけるかどうかを答える。

## 制約
- \\(1 \\le N \\le 100\\)
- \\(|E\_i| \\le 100\\)
- \\(E\_1 = E\_N = 0\\)

## 解法
各部屋のエネルギーの正負を反転させれば、できるだけエネルギーを減らさずにゴールまで辿りつくことは最短経路を求めることになる。
途中で死んではダメなので、コストを更新するときにコストが 100 未満であるかどうかをチェックする。
負閉路があればそこでエネルギーをいくらでも増やせるのでゴールまで辿りつける。
そうでなければ、ゴールのコストが 100 未満になっているかを調べればよい。

ただし、これだと負閉路があってもそこからゴールまで行けない場合に困るので、
前処理としてゴールから逆向きに DFS してそもそもゴールに到達できない頂点を削っておいた。

{% include_code lang:cpp poj/1932.cc %}
